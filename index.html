<!DOCTYPE html>
<html>
<head>
	<title>Free calc :D</title>
	<link rel="stylesheet" href="./style.css">
</head>
<body>
	<div class="calc_container">
		<div id="prev_val_container" class="hidden">
			<span id="prev_val"></span>
		</div>
		<div id="calculation_container">
			<span id='calculation_area'>
			</span>
		</div>
		<div class="keyboard_container">
			<div class="keyEl" onclick="calcKey('AC')">AC</div>
			<div class="keyEl inactive" onclick="calcKey('PM')">+/-</div>
			<div class="keyEl inactive" onclick="calcKey('PC')">%</div>
			<div class="keyEl" onclick="calcKey('SP')">/</div>
			<div class="keyEl" onclick="calcKey('7')">7</div>
			<div class="keyEl" onclick="calcKey('8')">8</div>
			<div class="keyEl" onclick="calcKey('9')">9</div>
			<div class="keyEl" onclick="calcKey('ML')">x</div>
			<div class="keyEl" onclick="calcKey('4')">4</div>
			<div class="keyEl" onclick="calcKey('5')">5</div>
			<div class="keyEl" onclick="calcKey('6')">6</div>
			<div class="keyEl" onclick="calcKey('PL')">+</div>
			<div class="keyEl" onclick="calcKey('1')">1</div>
			<div class="keyEl" onclick="calcKey('2')">2</div>
			<div class="keyEl" onclick="calcKey('3')">3</div>
			<div class="keyEl" onclick="calcKey('MN')">-</div>
			<div class="keyEl" onclick="calcKey('0')">0</div>
			<div class="keyEl" onclick="calcKey('DT')">.</div>
			<div class="keyEl keyEq" onclick="calcKey('EQ')">=</div>
		</div>
	</div>
	<script src="script.js"></script>
	<script>
		const calc_keys = document.getElementsByClassName('keyEl');
		var prev_sign='';
		var prev_val = '';
		var prev_val_container = document.getElementById('prev_val');
		var calcKey = function(type){
			let calc_value = document.getElementById('calculation_area');
			switch(type){
				case '0':
					calc_value.innerHTML += '0';
					break;
				case '1':
					calc_value.innerHTML += '1';
					break;
				case '2':
					calc_value.innerHTML += '2';
					break;
				case '3':
					calc_value.innerHTML += '3';
					break;
				case '4':
					calc_value.innerHTML += '4';
					break;
				case '5':
					calc_value.innerHTML += '5';
					break;
				case '6':
					calc_value.innerHTML += '6';
					break;
				case '7':
					calc_value.innerHTML += '7';
					break;
				case '8':
					calc_value.innerHTML += '8';
					break;
				case '9':
					calc_value.innerHTML += '9';
					break;
				case 'AC':
					prev_sign = '';
					clear_class();
					prev_val = '';
					prev_val_container.innerHTML = ''
					calc_value.innerHTML = '';
					break;
				case 'PM':
					calc_value.innerHTML = '';
					break;
				case 'PC':
					/*clear_class();
					calc_keys[2].classList.toggle('prev_sign');
					calc_value.innerHTML = '';*/
					break;
				case 'SP':
					clear_class();
					calc_keys[3].classList.toggle('prev_sign');
					prev_val_container.innerHTML = calc_value.innerText; 
					calc_value.innerHTML = calculate_ex(calc_value.innerText, prev_val, prev_sign);
					prev_val=prev_val_container.innerText;
					prev_sign = '/';

					break;
				case 'ML':
					clear_class();
					calc_keys[7].classList.toggle('prev_sign');
					prev_val_container.innerHTML = calc_value.innerText; 
					calc_value.innerHTML = calculate_ex(calc_value.innerText, prev_val, prev_sign);
					prev_val=prev_val_container.innerText;
					prev_sign = 'x';
					break;
				case 'PL':
					clear_class();
					calc_keys[11].classList.toggle('prev_sign');
					prev_val_container.innerHTML = calc_value.innerText; 
					calc_value.innerHTML = calculate_ex(calc_value.innerText, prev_val, prev_sign);
					prev_val=prev_val_container.innerText;
					prev_sign = '+';
					break;
				case 'MN':
					clear_class();
					calc_keys[15].classList.toggle('prev_sign');
					prev_val_container.innerHTML = calc_value.innerText; 
					calc_value.innerHTML = calculate_ex(calc_value.innerText, prev_val, prev_sign);
					prev_val=prev_val_container.innerText;
					prev_sign = '-';
					break;
				case 'EQ':
					calc_value.innerHTML = calculate_ex(calc_value.innerText, prev_val, prev_sign);
					prev_sign = '';
					prev_val = '';
					clear_class();
					break;
				case 'DT':
					calc_value.innerHTML += '.';
					break;
			}
			if(prev_val != ''){
				document.getElementById('prev_val_container').classList.remove('hidden');
			}
			else{
				document.getElementById('prev_val_container').classList.add('hidden');
			}
		}
		var clear_class = function(){
			for(var idx in calc_keys){
						if(typeof calc_keys[idx] == 'number'){
							break;
						}
						else{
							let it = calc_keys[idx];
							it.classList.remove('prev_sign');
						}
					}
		}
	</script>
</body>
</html>
